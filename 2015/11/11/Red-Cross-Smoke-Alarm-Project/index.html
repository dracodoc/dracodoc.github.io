<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Data Science,Red Cross,DataKind,Smoke Alarm project,NFIRS," />





  <link rel="alternate" href="/atom.xml" title="From Learning and Evolution to Data Science" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Summary
This is a write-up for my volunteer Data Science project for the American Red Cross.
The project used public data to help Red Cross directing limited resources to homes that more vulnerable to">
<meta property="og:type" content="article">
<meta property="og:title" content="Red Cross Smoke Alarm Project">
<meta property="og:url" content="http://dracodoc.github.io/2015/11/11/Red-Cross-Smoke-Alarm-Project/index.html">
<meta property="og:site_name" content="From Learning and Evolution to Data Science">
<meta property="og:description" content="Summary
This is a write-up for my volunteer Data Science project for the American Red Cross.
The project used public data to help Red Cross directing limited resources to homes that more vulnerable to">
<meta property="og:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-2.png">
<meta property="og:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-5.png">
<meta property="og:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-8.png">
<meta property="og:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-9.png">
<meta property="og:updated_time" content="2016-08-19T13:48:32.625Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Red Cross Smoke Alarm Project">
<meta name="twitter:description" content="Summary
This is a write-up for my volunteer Data Science project for the American Red Cross.
The project used public data to help Red Cross directing limited resources to homes that more vulnerable to">
<meta name="twitter:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-2.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://dracodoc.github.io/2015/11/11/Red-Cross-Smoke-Alarm-Project/"/>

  <title> Red Cross Smoke Alarm Project | From Learning and Evolution to Data Science </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">From Learning and Evolution to Data Science</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Red Cross Smoke Alarm Project
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-11-11T09:02:10-05:00" content="2015-11-11">
              2015-11-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Data-Science/" itemprop="url" rel="index">
                    <span itemprop="name">Data Science</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/11/Red-Cross-Smoke-Alarm-Project/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/11/11/Red-Cross-Smoke-Alarm-Project/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><ul>
<li>This is a write-up for my volunteer Data Science project for the American Red Cross.</li>
<li>The project used public data to help Red Cross directing limited resources to homes that more vulnerable to fire risk and loss.</li>
<li>My work in the project:<ul>
<li>Discovered the hidden information in NFIRS dataset, obtained and analyzed 10G NFIRS data.</li>
<li>Major contribution on model design, implemented NFIRS related predictors, and built interactive visualizations.</li>
<li>Geocoded 18 millions address in NFIRS data with AWS server, Postgresql, PostGIS.</li>
</ul>
</li>
</ul>
<a id="more"></a>
<h2 id="introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In May, 2015 I went to a <a href="http://www.meetup.com/DataKind-DC/events/220650281/" target="_blank" rel="external">MeetUp</a> organized by <a href="http://www.datakind.org/" target="_blank" rel="external">DataKind</a>, where Volunteers came from all kinds of background joined together to help non-profit organizations with Data Science. I joined a project <a href="https://hackpad.com/American-Red-Cross-DJuXtxOtqvw#:h=The-Effectiveness-of-Smoke-Ala" target="_blank" rel="external"><em>The Effectiveness of Smoke Alarm Installs and Home Fire</em></a> for the American Red Cross. <a href="http://www.redcross.org/news/press-release/Red-Cross-Campaign-to-Reduce-Home-Fire-Deaths-and-Injuries-in-US" target="_blank" rel="external">The Red Cross Smoke Alarm Home Visits</a> is already a <a href="http://nfpatoday.blog.nfpa.org/2015/08/more-than-100000-smoke-alarms-installed-and-15-lives-saved-less-than-one-year-into-red-cross-campaig.html" target="_blank" rel="external">very successful</a> campaign, but they were looking forward to the power of data and data science to further improve the project.</p>
<p><img src="data-coverage-by-ZCTA-and-counties-2.png" alt="The choropleth map of Red Cross Smoke Alarm Home Visits per county in 10 months"><br><em>The choropleth map of Red Cross Smoke Alarm Home Visits per county in 10 months</em></p>
<h2 id="project-goal"><a href="#Project-Goal" class="headerlink" title="Project Goal"></a>Project Goal</h2><p>Given limited resources and the ambitious project goal, the American Red Cross want to have a priority list for regions backed with data and analysis. The ranking could came from multiple factors, like <strong>the possibility of don&#x2019;t have smoke alarm installed</strong>, <strong>the risk of catching fire</strong>, <strong>the possible casualty and losses</strong>, maybe even taking the constraints of each Red Cross chapter into consideration. </p>
<h2 id="similar-work-from-engimaio"><a href="#Similar-work-from-Engima-io" class="headerlink" title="Similar work from Engima.io"></a>Similar work from Engima.io</h2><p>There was a similar project in New Orleans &#x2013; <a href="http://blog.enigma.io/open-data-and-public-safety/" target="_blank" rel="external">Smoke Alarm Outreach Program</a>. </p>
<p>They first targeted the areas of <strong>least likely to have smoke alarm installed</strong>. The <a href="http://www.census.gov/programs-surveys/ahs.html" target="_blank" rel="external">American Housing Survey(AHS)</a> provided some data on this in county level, and the <a href="https://www.census.gov/programs-surveys/acs/" target="_blank" rel="external">American Community Survey(ACS)</a> have more detailed results about many other questions in census block group level. Using the shared questions in these two survey, they were able to build a model to predict smoke alarm presence in block group level, thus same number of home visits could cover more homes without smoke alarms.</p>
<p>Then they studied the areas of <strong>most likely to suffer structure fire fatalities</strong>. According to <a href="http://www.nfpa.org/research/reports-and-statistics/fire-safety-equipment/smoke-alarms-in-us-home-fires" target="_blank" rel="external">NFPA research</a>, very young and very old are most susceptible to fire fatalities. Thus they calculated the fire risk per housing unit according to New Orleans historical data, then added age adjustment based on census population data. With these two factors combined, they ranked the high priority regions for smoke alarm outreach program.</p>
<p>After this New Orleans program, Enigma.io further <a href="http://blog.enigma.io/risk-model-for-residences-without-smoke-alarms/" target="_blank" rel="external">expanded the acs/ahs method to national level</a>, and produced a visualization website showing risk of lacking smoke alarms on map. <strong>They don&#x2019;t have fire risk data in national level</strong>, but provided an API to upload local fire risk data into the model.</p>
<h2 id="more-data-sources"><a href="#More-Data-Sources" class="headerlink" title="More Data Sources"></a>More Data Sources</h2><p>The American Red Cross project is a national level campaign in much larger scale compared to New Orleans project. Red Cross provided the data of their smoke alarm home visits in 10 months and the data of Red Cross disaster response to us for our analysis. </p>
<p><img src="data-coverage-by-ZCTA-and-counties-5.png" alt="The American Red Cross Diaster response for fire per county"><br><em>The American Red Cross Diaster response for fire per county</em></p>
<p>They also got several years <a href="http://www.usfa.fema.gov/data/nfirs/" target="_blank" rel="external">National Fire Incident Reporting System</a> (NFIRS) data, listed every fire incident&#x2019;s time and address. These were the starting point for us to work on.</p>
<p>I found the NFIRS data promising since it is the most complete public data set of fire incidents on national level. After lots of time spending on documents and search, I found this data set is very rich in information, although the problems and challenges are huge too.</p>
<p><img src="data-coverage-by-ZCTA-and-counties-8.png" alt="The Fire Incidents reported by NFIRS per county in 2010"><br><em>The Fire Incidents reported by NFIRS per county in 2010</em></p>
<p><img src="data-coverage-by-ZCTA-and-counties-9.png" alt="The Fire Incidents reported by NFIRS per ZCTA of Maryland in 2010"><br><em>The Fire Incidents reported by NFIRS per ZCTA of Maryland in 2010</em></p>
<p>First, the original NFIRS data included many aspects of fire incident, including time, location, fire type, cause of fire, whether there was fire detectors, whether the detectors alerted occupants, the casualty and property losses etc, the list could go on and on. The dataset we got from Red Cross is a compiled version with every address geocoded and verified, which are very useful. However I want to dig more information from the source.</p>
<p><a href="http://www.usfa.fema.gov/data/statistics/order_download_data.html" target="_blank" rel="external">The U.S. Fire Administration website</a> said you can order cd-rom from them for NFIRS data. However I searched and found some direct download links from FEMA. I downloaded all the data I found, from 1999 to 2011. Unfortunately, later I found the data of 2002 ~ 2009 only have about half the states. I guess it&#x2019;s because the data are excel files and each worksheet in excel can only hold 1 million rows, so the other half states were missing. Fortunately I contacted USFA and they sent the cd-roms of 2005 ~ 2013 to me, now we have 9 years complete and more recent data!</p>
<h2 id="problems-and-challenges"><a href="#Problems-and-Challenges" class="headerlink" title="Problems and Challenges"></a>Problems and Challenges</h2><p>Using NFIRS data is not easy. Their website stressed again and again that you should not just count the incidents, because NFIRS participation is not mandatory at the national level. With about 2/3 of all fire departments participating, it only included about 75% of all reported fires. To make things worse, there is no definitive list of all fire departments and the participating departments. There are some very limited fire department census data, and some fire department data for each year which are not up to date for all the changes in fire departments. How to adjust for this coverage bias is a big challenge.</p>
<p>Another widespread problem is the data quality. There are many columns not filled, data recorded in wrong column and obvious input errors (some years&#x2019; data even excluded Puerto Rico entirely because of data quality problems). </p>
<p>Besides, the fire detectors defined by NFIRS including other type of alarms beside smoke alarm. Although there are further break down of detector types, but the valid entries only take 10 ~ 20 % in all home fires records.</p>
<p>In the research on all these problems, I found many analysis methods will need to have the fire incident address geocoded, i.e. verify the address, get the coordinates and map to census block. This is the basis of linking NFIRS data with other data, or doing any geospatial analysis.</p>
<h2 id="geocoding-18-million-addresses"><a href="#Geocoding-18-million-addresses" class="headerlink" title="Geocoding 18 million addresses"></a>Geocoding 18 million addresses</h2><p>The NFIRS data have 20 million incidents each year. The public data only includes fire incidents, that&#x2019;s still 2 million each year and I have 9 years of data. Actually we should be only interested in home fires which is a part of all fire incidents, but I think the complete incidents location distribution can help to estimate the NFIRS data coverage, so I still want to geocode all incidents addresses. This geocoding task is impossible for any free online service and too expensive for any paid service. I have to setup a geocoding server by my own.</p>
<p>The data and the software needed are all public and free, though it is definitely not a trivial task. Enigma.io open sourced their geocoding server setup as <a href="https://github.com/enigma-io/ansible-tiger-geocoder-playbook" target="_blank" rel="external">an ansible playbook</a>, but that&#x2019;s for Amazon EC2, local linux machine or linux virtual machine. I&#x2019;m using windows and afraid of the performance limit of virtual machine, so I still need to install everything and setup everything in windows. </p>
<p>After some efforts I got the server running with just 2 states data to test. Then it&#x2019;s SQL time. With lots of learning, experiments I finally got a working script. The experiments were promising, however I have to move the database out of the SSD drive when I started to download full national data which amount to 100G. With all the data downloaded in regular hard drive, I found the geocoding performance deteriorated seriously, which make the geocoding task very time consuming. </p>
<p>Fortunately I got the generous support of DataKind on their AWS resources, now I can run the geocoding task in Amazon EC2 server. I want to test everything as comprehensive as possible before deploying an expensive EC2 instance, so I decided to do everything with the Amazon EC2 free tier service first. The free tier only allow 30G storage, 1G RAM but I can test with 2 states first.</p>
<p>Now I can use the ansible playbook from Engima. With some tweak I got it running with 2 states data. Surprisly the performance is much better than home pc, even with just 1G RAM. Though I&#x2019;m not sure if the geocoding peformance will drop again with full national data downloaded.</p>
<p>I further improved my script to make it work with big input file and can work in batch mode. I found I have to use a mix of SQL, plpgsql, shell, python to get a fully batch mode work flow. I&#x2019;ll write about the geocoding server setup and share my script later. I probably searched hundreds of questions, read hundreds of documentation, and made stackoverflow my most frequent visit site. So it will be a very long post.</p>
<p>My next step is to setup a full scale Amazon EC2 server to geocode all NFIRS data and other possible candidates. With all the address geocoded, we can do lots of things and link to many other data sources, it will be very promising.</p>
<h2 id="update-interactively-visualizing-fire-incident-by-population-for-each-census-tract"><a href="#Update-Interactively-visualizing-fire-incident-by-population-for-each-census-tract" class="headerlink" title="Update: Interactively visualizing fire incident by population for each census tract"></a>Update: Interactively visualizing fire incident by population for each census tract</h2><p>Update: I have finished the Geocoding and built indicators based on the accurate location of NFIRS events. Here are some sample interactive visualization of the results. You can zoom in and click any census tract for more details.</p>
<h4 id="reported-structured-fire-incidents-per-1000-people-for-each-census-tract-in-maryland"><a href="#Reported-structured-fire-incidents-per-1000-people-for-each-census-tract-in-Maryland" class="headerlink" title="Reported structured fire incidents per 1000 people for each census tract in Maryland"></a>Reported structured fire incidents per 1000 people for each census tract in Maryland</h4><p><strong>2009</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2009_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<p><strong>2010</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2010_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<p><strong>2011</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2011_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<p><strong>2012</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2012_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<p><strong>2013</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2013_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<h2 id="version-history"><a href="#Version-History" class="headerlink" title="Version History"></a>Version History</h2><ul>
<li>2015-11-11 : First version.</li>
<li>2016-05-10 : Added Summary.</li>
<li>2016-05-11 : Added visualization of fire incident per census tract.</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Data-Science/" rel="tag">#Data Science</a>
          
            <a href="/tags/Red-Cross/" rel="tag">#Red Cross</a>
          
            <a href="/tags/DataKind/" rel="tag">#DataKind</a>
          
            <a href="/tags/Smoke-Alarm-project/" rel="tag">#Smoke Alarm project</a>
          
            <a href="/tags/NFIRS/" rel="tag">#NFIRS</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/10/23/house-price/" rel="next" title="Exploring House Price Estimation And Imagining A Better Real Estate Website">
                <i class="fa fa-chevron-left"></i> Exploring House Price Estimation And Imagining A Better Real Estate Website
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/11/17/Geocoding/" rel="prev" title="Geocoding 18 million addresses with PostGIS Tiger Geocoder">
                Geocoding 18 million addresses with PostGIS Tiger Geocoder <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="dracodoc" />
          <p class="site-author-name" itemprop="name">dracodoc</p>
          <p class="site-description motion-element" itemprop="description">This is about my exploration of Data Science, came from research background of AI, artificial learning and evolution.</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.R-bloggers.com" title="R-bloggers" target="_blank">R-bloggers</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#summary"><span class="nav-number">1.</span> <span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#introduction"><span class="nav-number">2.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#project-goal"><span class="nav-number">3.</span> <span class="nav-text">Project Goal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#similar-work-from-engimaio"><span class="nav-number">4.</span> <span class="nav-text">Similar work from Engima.io</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#more-data-sources"><span class="nav-number">5.</span> <span class="nav-text">More Data Sources</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#problems-and-challenges"><span class="nav-number">6.</span> <span class="nav-text">Problems and Challenges</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#geocoding-18-million-addresses"><span class="nav-number">7.</span> <span class="nav-text">Geocoding 18 million addresses</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#update-interactively-visualizing-fire-incident-by-population-for-each-census-tract"><span class="nav-number">8.</span> <span class="nav-text">Update: Interactively visualizing fire incident by population for each census tract</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#reported-structured-fire-incidents-per-1000-people-for-each-census-tract-in-maryland"><span class="nav-number">8.0.1.</span> <span class="nav-text">Reported structured fire incidents per 1000 people for each census tract in Maryland</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#version-history"><span class="nav-number">9.</span> <span class="nav-text">Version History</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dracodoc</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'dracodocgithub';
      var disqus_identifier = '2015/11/11/Red-Cross-Smoke-Alarm-Project/';
      var disqus_title = "Red Cross Smoke Alarm Project";
      var disqus_url = 'http://dracodoc.github.io/2015/11/11/Red-Cross-Smoke-Alarm-Project/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

</body>
</html>
