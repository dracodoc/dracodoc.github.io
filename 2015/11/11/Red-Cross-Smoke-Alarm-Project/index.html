<!doctype html>
<html class="theme-next ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="DataKind,NFIRS,Data Science,R,Red Cross,Smoke Alarm," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="Summary
This is a write-up for my volunteer Data Science project for the American Red Cross.
The project used public data to help Red Cross directing limited resources to homes that more vulnerable to">
<meta property="og:type" content="article">
<meta property="og:title" content="Red Cross Smoke Alarm Project">
<meta property="og:url" content="http://dracodoc.github.io/2015/11/11/Red-Cross-Smoke-Alarm-Project/index.html">
<meta property="og:site_name" content="Artificial Learning and Evolution inspired by Nature">
<meta property="og:description" content="Summary
This is a write-up for my volunteer Data Science project for the American Red Cross.
The project used public data to help Red Cross directing limited resources to homes that more vulnerable to">
<meta property="og:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-2.png">
<meta property="og:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-5.png">
<meta property="og:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-8.png">
<meta property="og:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-9.png">
<meta property="og:updated_time" content="2016-05-12T01:32:42.601Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Red Cross Smoke Alarm Project">
<meta name="twitter:description" content="Summary
This is a write-up for my volunteer Data Science project for the American Red Cross.
The project used public data to help Red Cross directing limited resources to homes that more vulnerable to">
<meta name="twitter:image" content="http://dracodoc.github.io/data-coverage-by-ZCTA-and-counties-2.png">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'always',
    motion: false
  };
</script>

  <title> Red Cross Smoke Alarm Project | Artificial Learning and Evolution inspired by Nature </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Artificial Learning and Evolution inspired by Nature</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-question-circle fa-fw"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            Tags
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Red Cross Smoke Alarm Project
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2015-11-11T09:02:10-05:00" content="2015-11-11">
              2015-11-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; In
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Data-Science/" itemprop="url" rel="index">
                    <span itemprop="name">Data Science</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/11/11/Red-Cross-Smoke-Alarm-Project/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/11/11/Red-Cross-Smoke-Alarm-Project/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h2 id="summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><ul>
<li>This is a write-up for my volunteer Data Science project for the American Red Cross.</li>
<li>The project used public data to help Red Cross directing limited resources to homes that more vulnerable to fire risk and loss.</li>
<li>My work in the project:<ul>
<li>Discovered the hidden information in NFIRS dataset, obtained and analyzed 10G NFIRS data.</li>
<li>Major contribution on model design, implemented NFIRS related predictors.</li>
<li>Geocoded 18 millions address in NFIRS data with AWS server, Postgresql, PostGIS.</li>
</ul>
</li>
</ul>
<a id="more"></a>
<h2 id="introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In May, 2015 I went to a <a href="http://www.meetup.com/DataKind-DC/events/220650281/" target="_blank" rel="external">MeetUp</a> organized by <a href="http://www.datakind.org/" target="_blank" rel="external">DataKind</a>, where Volunteers came from all kinds of background joined together to help non-profit organizations with Data Science. I joined a project <a href="https://hackpad.com/American-Red-Cross-DJuXtxOtqvw#:h=The-Effectiveness-of-Smoke-Ala" target="_blank" rel="external"><em>The Effectiveness of Smoke Alarm Installs and Home Fire</em></a> for the American Red Cross. <a href="http://www.redcross.org/news/press-release/Red-Cross-Campaign-to-Reduce-Home-Fire-Deaths-and-Injuries-in-US" target="_blank" rel="external">The Red Cross Smoke Alarm Home Visits</a> is already a <a href="http://nfpatoday.blog.nfpa.org/2015/08/more-than-100000-smoke-alarms-installed-and-15-lives-saved-less-than-one-year-into-red-cross-campaig.html" target="_blank" rel="external">very successful</a> campaign, but they were looking forward to the power of data and data science to further improve the project.</p>
<p><img src="data-coverage-by-ZCTA-and-counties-2.png" alt="The choropleth map of Red Cross Smoke Alarm Home Visits per county in 10 months"><br><em>The choropleth map of Red Cross Smoke Alarm Home Visits per county in 10 months</em></p>
<h2 id="project-goal"><a href="#Project-Goal" class="headerlink" title="Project Goal"></a>Project Goal</h2><p>Given limited resources and the ambitious project goal, the American Red Cross want to have a priority list for regions backed with data and analysis. The ranking could came from multiple factors, like <strong>the possibility of don&#x2019;t have smoke alarm installed</strong>, <strong>the risk of catching fire</strong>, <strong>the possible casualty and losses</strong>, maybe even taking the constraints of each Red Cross chapter into consideration. </p>
<h2 id="similar-work-from-engimaio"><a href="#Similar-work-from-Engima-io" class="headerlink" title="Similar work from Engima.io"></a>Similar work from Engima.io</h2><p>There was a similar project in New Orleans &#x2013; <a href="http://blog.enigma.io/open-data-and-public-safety/" target="_blank" rel="external">Smoke Alarm Outreach Program</a>. </p>
<p>They first targeted the areas of <strong>least likely to have smoke alarm installed</strong>. The <a href="http://www.census.gov/programs-surveys/ahs.html" target="_blank" rel="external">American Housing Survey(AHS)</a> provided some data on this in county level, and the <a href="https://www.census.gov/programs-surveys/acs/" target="_blank" rel="external">American Community Survey(ACS)</a> have more detailed results about many other questions in census block group level. Using the shared questions in these two survey, they were able to build a model to predict smoke alarm presence in block group level, thus same number of home visits could cover more homes without smoke alarms.</p>
<p>Then they studied the areas of <strong>most likely to suffer structure fire fatalities</strong>. According to <a href="http://www.nfpa.org/research/reports-and-statistics/fire-safety-equipment/smoke-alarms-in-us-home-fires" target="_blank" rel="external">NFPA research</a>, very young and very old are most susceptible to fire fatalities. Thus they calculated the fire risk per housing unit according to New Orleans historical data, then added age adjustment based on census population data. With these two factors combined, they ranked the high priority regions for smoke alarm outreach program.</p>
<p>After this New Orleans program, Enigma.io further <a href="http://blog.enigma.io/risk-model-for-residences-without-smoke-alarms/" target="_blank" rel="external">expanded the acs/ahs method to national level</a>, and produced a visualization website showing risk of lacking smoke alarms on map. <strong>They don&#x2019;t have fire risk data in national level</strong>, but provided an API to upload local fire risk data into the model.</p>
<h2 id="more-data-sources"><a href="#More-Data-Sources" class="headerlink" title="More Data Sources"></a>More Data Sources</h2><p>The American Red Cross project is a national level campaign in much larger scale compared to New Orleans project. Red Cross provided the data of their smoke alarm home visits in 10 months and the data of Red Cross disaster response to us for our analysis. </p>
<p><img src="data-coverage-by-ZCTA-and-counties-5.png" alt="The American Red Cross Diaster response for fire per county"><br><em>The American Red Cross Diaster response for fire per county</em></p>
<p>They also got several years <a href="http://www.usfa.fema.gov/data/nfirs/" target="_blank" rel="external">National Fire Incident Reporting System</a> (NFIRS) data, listed every fire incident&#x2019;s time and address. These were the starting point for us to work on.</p>
<p>I found the NFIRS data promising since it is the most complete public data set of fire incidents on national level. After lots of time spending on documents and search, I found this data set is very rich in information, although the problems and challenges are huge too.</p>
<p><img src="data-coverage-by-ZCTA-and-counties-8.png" alt="The Fire Incidents reported by NFIRS per county in 2010"><br><em>The Fire Incidents reported by NFIRS per county in 2010</em></p>
<p><img src="data-coverage-by-ZCTA-and-counties-9.png" alt="The Fire Incidents reported by NFIRS per ZCTA of Maryland in 2010"><br><em>The Fire Incidents reported by NFIRS per ZCTA of Maryland in 2010</em></p>
<p>First, the original NFIRS data included many aspects of fire incident, including time, location, fire type, cause of fire, whether there was fire detectors, whether the detectors alerted occupants, the casualty and property losses etc, the list could go on and on. The dataset we got from Red Cross is a compiled version with every address geocoded and verified, which are very useful. However I want to dig more information from the source.</p>
<p><a href="http://www.usfa.fema.gov/data/statistics/order_download_data.html" target="_blank" rel="external">The U.S. Fire Administration website</a> said you can order cd-rom from them for NFIRS data. However I searched and found some direct download links from FEMA. I downloaded all the data I found, from 1999 to 2011. Unfortunately, later I found the data of 2002 ~ 2009 only have about half the states. I guess it&#x2019;s because the data are excel files and each worksheet in excel can only hold 1 million rows, so the other half states were missing. Fortunately I contacted USFA and they sent the cd-roms of 2005 ~ 2013 to me, now we have 9 years complete and more recent data!</p>
<h2 id="problems-and-challenges"><a href="#Problems-and-Challenges" class="headerlink" title="Problems and Challenges"></a>Problems and Challenges</h2><p>Using NFIRS data is not easy. Their website stressed again and again that you should not just count the incidents, because NFIRS participation is not mandatory at the national level. With about 2/3 of all fire departments participating, it only included about 75% of all reported fires. To make things worse, there is no definitive list of all fire departments and the participating departments. There are some very limited fire department census data, and some fire department data for each year which are not up to date for all the changes in fire departments. How to adjust for this coverage bias is a big challenge.</p>
<p>Another widespread problem is the data quality. There are many columns not filled, data recorded in wrong column and obvious input errors (some years&#x2019; data even excluded Puerto Rico entirely because of data quality problems). </p>
<p>Besides, the fire detectors defined by NFIRS including other type of alarms beside smoke alarm. Although there are further break down of detector types, but the valid entries only take 10 ~ 20 % in all home fires records.</p>
<p>In the research on all these problems, I found many analysis methods will need to have the fire incident address geocoded, i.e. verify the address, get the coordinates and map to census block. This is the basis of linking NFIRS data with other data, or doing any geospatial analysis.</p>
<h2 id="geocoding-18-million-addresses"><a href="#Geocoding-18-million-addresses" class="headerlink" title="Geocoding 18 million addresses"></a>Geocoding 18 million addresses</h2><p>The NFIRS data have 20 million incidents each year. The public data only includes fire incidents, that&#x2019;s still 2 million each year and I have 9 years of data. Actually we should be only interested in home fires which is a part of all fire incidents, but I think the complete incidents location distribution can help to estimate the NFIRS data coverage, so I still want to geocode all incidents addresses. This geocoding task is impossible for any free online service and too expensive for any paid service. I have to setup a geocoding server by my own.</p>
<p>The data and the software needed are all public and free, though it is definitely not a trivial task. Enigma.io open sourced their geocoding server setup as <a href="https://github.com/enigma-io/ansible-tiger-geocoder-playbook" target="_blank" rel="external">an ansible playbook</a>, but that&#x2019;s for Amazon EC2, local linux machine or linux virtual machine. I&#x2019;m using windows and afraid of the performance limit of virtual machine, so I still need to install everything and setup everything in windows. </p>
<p>After some efforts I got the server running with just 2 states data to test. Then it&#x2019;s SQL time. With lots of learning, experiments I finally got a working script. The experiments were promising, however I have to move the database out of the SSD drive when I started to download full national data which amount to 100G. With all the data downloaded in regular hard drive, I found the geocoding performance deteriorated seriously, which make the geocoding task very time consuming. </p>
<p>Fortunately I got the generous support of DataKind on their AWS resources, now I can run the geocoding task in Amazon EC2 server. I want to test everything as comprehensive as possible before deploying an expensive EC2 instance, so I decided to do everything with the Amazon EC2 free tier service first. The free tier only allow 30G storage, 1G RAM but I can test with 2 states first.</p>
<p>Now I can use the ansible playbook from Engima. With some tweak I got it running with 2 states data. Surprisly the performance is much better than home pc, even with just 1G RAM. Though I&#x2019;m not sure if the geocoding peformance will drop again with full national data downloaded.</p>
<p>I further improved my script to make it work with big input file and can work in batch mode. I found I have to use a mix of SQL, plpgsql, shell, python to get a fully batch mode work flow. I&#x2019;ll write about the geocoding server setup and share my script later. I probably searched hundreds of questions, read hundreds of documentation, and made stackoverflow my most frequent visit site. So it will be a very long post.</p>
<p>My next step is to setup a full scale Amazon EC2 server to geocode all NFIRS data and other possible candidates. With all the address geocoded, we can do lots of things and link to many other data sources, it will be very promising.</p>
<h2 id="update-visualizing-fire-incident-by-population-for-each-census-tract"><a href="#Update-Visualizing-fire-incident-by-population-for-each-census-tract" class="headerlink" title="Update: Visualizing fire incident by population for each census tract"></a>Update: Visualizing fire incident by population for each census tract</h2><p>Update: I have finished the Geocoding and built indicators based on the accurate location of NFIRS events. Here are some sample visualization of the results. You can zoom in and click any census tract for more details.</p>
<h4 id="reported-structured-fire-incidents-per-1000-people-for-each-census-tract-in-maryland"><a href="#Reported-structured-fire-incidents-per-1000-people-for-each-census-tract-in-Maryland" class="headerlink" title="Reported structured fire incidents per 1000 people for each census tract in Maryland"></a>Reported structured fire incidents per 1000 people for each census tract in Maryland</h4><p><strong>2009</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2009_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<p><strong>2010</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2010_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<p><strong>2011</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2011_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<p><strong>2012</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2012_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<p><strong>2013</strong></p>
<iframe src="https://cdn.rawgit.com/home-fire-risk/smoke_alarm_models/master/model_2a_incidents_per_1k_people/Visualization/2013_MD.html" width="800" height="400" frameborder="0" allowfullscreen></iframe>
<h2 id="version-history"><a href="#Version-History" class="headerlink" title="Version History"></a>Version History</h2><ul>
<li>2015-11-11 : First version.</li>
<li>2016-05-10 : Added Summary.</li>
<li>2016-05-11 : Added visualization of fire incident per census tract.</li>
</ul>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/DataKind/" rel="tag">#DataKind</a>
          
            <a href="/tags/NFIRS/" rel="tag">#NFIRS</a>
          
            <a href="/tags/Data-Science/" rel="tag">#Data Science</a>
          
            <a href="/tags/R/" rel="tag">#R</a>
          
            <a href="/tags/Red-Cross/" rel="tag">#Red Cross</a>
          
            <a href="/tags/Smoke-Alarm/" rel="tag">#Smoke Alarm</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/10/23/house-price/" rel="next" title="Exploring House Price Estimation And Imagining A Better Real Estate Website">
                <i class="fa fa-chevron-left"></i> Exploring House Price Estimation And Imagining A Better Real Estate Website
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/11/17/Geocoding/" rel="prev" title="Geocoding 18 million addresses with PostGIS Tiger Geocoder">
                Geocoding 18 million addresses with PostGIS Tiger Geocoder <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table Of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="dracodoc" itemprop="image"/>
          <p class="site-author-name" itemprop="name">dracodoc</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Artificial learning and Evolution inspired by nature</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">3</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#summary"><span class="nav-number">1.</span> <span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#introduction"><span class="nav-number">2.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#project-goal"><span class="nav-number">3.</span> <span class="nav-text">Project Goal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#similar-work-from-engimaio"><span class="nav-number">4.</span> <span class="nav-text">Similar work from Engima.io</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#more-data-sources"><span class="nav-number">5.</span> <span class="nav-text">More Data Sources</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#problems-and-challenges"><span class="nav-number">6.</span> <span class="nav-text">Problems and Challenges</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#geocoding-18-million-addresses"><span class="nav-number">7.</span> <span class="nav-text">Geocoding 18 million addresses</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#update-visualizing-fire-incident-by-population-for-each-census-tract"><span class="nav-number">8.</span> <span class="nav-text">Update: Visualizing fire incident by population for each census tract</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#reported-structured-fire-incidents-per-1000-people-for-each-census-tract-in-maryland"><span class="nav-number">8.0.1.</span> <span class="nav-text">Reported structured fire incidents per 1000 people for each census tract in Maryland</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#version-history"><span class="nav-number">9.</span> <span class="nav-text">Version History</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dracodoc</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  

    <script type="text/javascript">
      var disqus_shortname = 'dracodocgithub';
      var disqus_identifier = '2015/11/11/Red-Cross-Smoke-Alarm-Project/';
      var disqus_title = 'Red Cross Smoke Alarm Project';
      var disqus_url = 'http://dracodoc.github.io/2015/11/11/Red-Cross-Smoke-Alarm-Project/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post' || CONFIG.sidebar === 'always') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
